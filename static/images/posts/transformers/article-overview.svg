<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1e3a8a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="modernGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#059669;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>

  <!-- Header -->
  <rect width="1200" height="100" fill="url(#headerGrad)"/>
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="white" text-anchor="middle">
    Transformer Internals: What Changed Since 2017
  </text>
  <text x="600" y="70" font-family="Arial, sans-serif" font-size="18" fill="#e0e7ff" text-anchor="middle">
    Five Key Modifications That Make Modern Transformers Work at Scale
  </text>

  <!-- Main Content Grid -->

  <!-- Section 1: Position Embeddings -->
  <g id="position-embeddings">
    <rect x="50" y="130" width="340" height="280" rx="10" fill="white" stroke="#cbd5e1" stroke-width="2"/>
    <rect x="50" y="130" width="340" height="50" rx="10" fill="#3b82f6"/>
    <text x="220" y="163" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white" text-anchor="middle">
      1. Position Embeddings
    </text>

    <!-- Evolution arrows -->
    <text x="70" y="210" font-family="Arial, sans-serif" font-size="16" fill="#64748b">2017</text>
    <rect x="130" y="195" width="140" height="30" rx="5" fill="#e2e8f0" stroke="#94a3b8" stroke-width="1"/>
    <text x="200" y="215" font-family="Arial, sans-serif" font-size="14" fill="#334155" text-anchor="middle">Learned</text>

    <path d="M 200 225 L 200 245" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

    <rect x="130" y="245" width="140" height="30" rx="5" fill="#e2e8f0" stroke="#94a3b8" stroke-width="1"/>
    <text x="200" y="265" font-family="Arial, sans-serif" font-size="14" fill="#334155" text-anchor="middle">Sinusoidal</text>

    <path d="M 200 275 L 200 295" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

    <rect x="130" y="295" width="140" height="30" rx="5" fill="#e2e8f0" stroke="#94a3b8" stroke-width="1"/>
    <text x="200" y="315" font-family="Arial, sans-serif" font-size="14" fill="#334155" text-anchor="middle">ALiBi</text>

    <path d="M 200 325 L 200 345" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead-green)"/>

    <text x="70" y="370" font-family="Arial, sans-serif" font-size="16" fill="#10b981" font-weight="bold">2024</text>
    <rect x="130" y="355" width="140" height="35" rx="5" fill="url(#modernGrad)" stroke="#059669" stroke-width="2"/>
    <text x="200" y="378" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" text-anchor="middle">RoPE ⭐</text>
  </g>

  <!-- Section 2: Layer Normalization -->
  <g id="layer-norm">
    <rect x="430" y="130" width="340" height="280" rx="10" fill="white" stroke="#cbd5e1" stroke-width="2"/>
    <rect x="430" y="130" width="340" height="50" rx="10" fill="#8b5cf6"/>
    <text x="600" y="163" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white" text-anchor="middle">
      2. Layer Normalization
    </text>

    <!-- 2017 -->
    <text x="450" y="210" font-family="Arial, sans-serif" font-size="16" fill="#64748b">2017</text>
    <rect x="510" y="195" width="220" height="35" rx="5" fill="#e2e8f0" stroke="#94a3b8" stroke-width="1"/>
    <text x="620" y="218" font-family="Arial, sans-serif" font-size="14" fill="#334155" text-anchor="middle">Post-Norm + LayerNorm</text>

    <!-- Arrow -->
    <path d="M 620 230 L 620 300" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <text x="650" y="265" font-family="Arial, sans-serif" font-size="13" fill="#059669" font-weight="bold">Gradient</text>
    <text x="650" y="280" font-family="Arial, sans-serif" font-size="13" fill="#059669" font-weight="bold">Highway</text>

    <!-- 2024 -->
    <text x="450" y="325" font-family="Arial, sans-serif" font-size="16" fill="#10b981" font-weight="bold">2024</text>
    <rect x="510" y="310" width="220" height="35" rx="5" fill="url(#modernGrad)" stroke="#059669" stroke-width="2"/>
    <text x="620" y="333" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" text-anchor="middle">Pre-Norm + RMSNorm ⭐</text>

    <!-- Benefits -->
    <text x="450" y="370" font-family="Arial, sans-serif" font-size="13" fill="#475569">✓ Stable training</text>
    <text x="450" y="390" font-family="Arial, sans-serif" font-size="13" fill="#475569">✓ 50% fewer parameters</text>
  </g>

  <!-- Section 3: Attention -->
  <g id="attention">
    <rect x="810" y="130" width="340" height="280" rx="10" fill="white" stroke="#cbd5e1" stroke-width="2"/>
    <rect x="810" y="130" width="340" height="50" rx="10" fill="#ec4899"/>
    <text x="980" y="163" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white" text-anchor="middle">
      3. Attention Mechanisms
    </text>

    <!-- Pattern -->
    <text x="830" y="210" font-family="Arial, sans-serif" font-size="16" fill="#64748b">Pattern:</text>
    <rect x="830" y="220" width="140" height="30" rx="5" fill="#e2e8f0" stroke="#94a3b8" stroke-width="1"/>
    <text x="900" y="240" font-family="Arial, sans-serif" font-size="14" fill="#334155" text-anchor="middle">Full O(n²)</text>

    <text x="980" y="240" font-family="Arial, sans-serif" font-size="20" fill="#94a3b8">→</text>

    <rect x="1000" y="220" width="130" height="30" rx="5" fill="url(#modernGrad)" stroke="#059669" stroke-width="2"/>
    <text x="1065" y="240" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Sliding Window</text>

    <!-- Heads -->
    <text x="830" y="275" font-family="Arial, sans-serif" font-size="16" fill="#64748b">Heads:</text>
    <rect x="830" y="285" width="140" height="30" rx="5" fill="#e2e8f0" stroke="#94a3b8" stroke-width="1"/>
    <text x="900" y="305" font-family="Arial, sans-serif" font-size="14" fill="#334155" text-anchor="middle">MHA</text>

    <text x="980" y="305" font-family="Arial, sans-serif" font-size="20" fill="#94a3b8">→</text>

    <rect x="1000" y="285" width="130" height="30" rx="5" fill="url(#modernGrad)" stroke="#059669" stroke-width="2"/>
    <text x="1065" y="305" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">GQA / MQA</text>

    <!-- Benefits -->
    <text x="830" y="345" font-family="Arial, sans-serif" font-size="13" fill="#475569">✓ O(n×w) complexity</text>
    <text x="830" y="365" font-family="Arial, sans-serif" font-size="13" fill="#475569">✓ Smaller KV cache</text>
    <text x="830" y="385" font-family="Arial, sans-serif" font-size="13" fill="#475569">✓ 128K+ context length</text>
  </g>

  <!-- Section 4: Architecture Types -->
  <g id="architecture">
    <rect x="50" y="450" width="530" height="310" rx="10" fill="white" stroke="#cbd5e1" stroke-width="2"/>
    <rect x="50" y="450" width="530" height="50" rx="10" fill="#f59e0b"/>
    <text x="315" y="483" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white" text-anchor="middle">
      4. Three Architecture Types
    </text>

    <!-- Encoder-Decoder -->
    <rect x="70" y="520" width="150" height="100" rx="5" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="145" y="545" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#92400e" text-anchor="middle">Encoder-Decoder</text>
    <text x="145" y="565" font-family="Arial, sans-serif" font-size="12" fill="#78350f" text-anchor="middle">2017 Original</text>
    <text x="145" y="590" font-family="Arial, sans-serif" font-size="11" fill="#451a03" text-anchor="middle">Translation</text>
    <text x="145" y="605" font-family="Arial, sans-serif" font-size="11" fill="#451a03" text-anchor="middle">T5, BART</text>

    <!-- Encoder-Only -->
    <rect x="240" y="520" width="150" height="100" rx="5" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
    <text x="315" y="545" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#1e3a8a" text-anchor="middle">Encoder-Only</text>
    <text x="315" y="565" font-family="Arial, sans-serif" font-size="12" fill="#1e40af" text-anchor="middle">BERT Paradigm</text>
    <text x="315" y="590" font-family="Arial, sans-serif" font-size="11" fill="#1e3a8a" text-anchor="middle">Classification</text>
    <text x="315" y="605" font-family="Arial, sans-serif" font-size="11" fill="#1e3a8a" text-anchor="middle">BERT, RoBERTa</text>

    <!-- Decoder-Only -->
    <rect x="410" y="520" width="150" height="100" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="3"/>
    <text x="485" y="545" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#065f46" text-anchor="middle">Decoder-Only ⭐</text>
    <text x="485" y="565" font-family="Arial, sans-serif" font-size="12" fill="#047857" text-anchor="middle">Modern Standard</text>
    <text x="485" y="590" font-family="Arial, sans-serif" font-size="11" fill="#064e3b" text-anchor="middle">Generation, Chat</text>
    <text x="485" y="605" font-family="Arial, sans-serif" font-size="11" fill="#064e3b" text-anchor="middle">GPT-4, LLaMA</text>

    <!-- Why Decoder-Only Wins -->
    <rect x="70" y="640" width="490" height="100" rx="5" fill="#f0fdf4" stroke="#10b981" stroke-width="1"/>
    <text x="315" y="663" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">Why Decoder-Only Dominates:</text>
    <text x="315" y="685" font-family="Arial, sans-serif" font-size="12" fill="#064e3b" text-anchor="middle">✓ Dead simple: next-token prediction</text>
    <text x="315" y="703" font-family="Arial, sans-serif" font-size="12" fill="#064e3b" text-anchor="middle">✓ Scales perfectly with compute</text>
    <text x="315" y="721" font-family="Arial, sans-serif" font-size="12" fill="#064e3b" text-anchor="middle">✓ Matches chat/completion use case</text>
  </g>

  <!-- Section 5: BERT Deep Dive -->
  <g id="bert">
    <rect x="620" y="450" width="530" height="310" rx="10" fill="white" stroke="#cbd5e1" stroke-width="2"/>
    <rect x="620" y="450" width="530" height="50" rx="10" fill="#06b6d4"/>
    <text x="885" y="483" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white" text-anchor="middle">
      5. BERT: Encoder-Only Deep Dive
    </text>

    <!-- Pre-training -->
    <text x="640" y="525" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#0e7490">Pre-training Tasks:</text>
    <rect x="640" y="535" width="230" height="35" rx="5" fill="#cffafe" stroke="#06b6d4" stroke-width="1"/>
    <text x="755" y="558" font-family="Arial, sans-serif" font-size="13" fill="#164e63" text-anchor="middle">MLM: Mask 15% of tokens</text>

    <rect x="640" y="580" width="230" height="35" rx="5" fill="#fecaca" stroke="#dc2626" stroke-width="1" stroke-dasharray="4"/>
    <text x="755" y="603" font-family="Arial, sans-serif" font-size="13" fill="#991b1b" text-anchor="middle">NSP (dropped in RoBERTa)</text>

    <!-- Variants -->
    <text x="640" y="640" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#0e7490">Key Variants:</text>

    <rect x="640" y="655" width="150" height="45" rx="5" fill="#e0e7ff" stroke="#6366f1" stroke-width="1"/>
    <text x="715" y="673" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#312e81" text-anchor="middle">DistilBERT</text>
    <text x="715" y="690" font-family="Arial, sans-serif" font-size="11" fill="#4338ca" text-anchor="middle">6 layers, 60% faster</text>

    <rect x="810" y="655" width="150" height="45" rx="5" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
    <text x="885" y="673" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#14532d" text-anchor="middle">RoBERTa ⭐</text>
    <text x="885" y="690" font-family="Arial, sans-serif" font-size="11" fill="#166534" text-anchor="middle">Better training</text>

    <rect x="980" y="655" width="150" height="45" rx="5" fill="#f3e8ff" stroke="#9333ea" stroke-width="1"/>
    <text x="1055" y="673" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#581c87" text-anchor="middle">BERT-base</text>
    <text x="1055" y="690" font-family="Arial, sans-serif" font-size="11" fill="#6b21a8" text-anchor="middle">110M params</text>

    <!-- Use Cases -->
    <rect x="640" y="715" width="490" height="30" rx="5" fill="#f1f5f9" stroke="#64748b" stroke-width="1"/>
    <text x="885" y="735" font-family="Arial, sans-serif" font-size="13" fill="#334155" text-anchor="middle">Use: Classification • Sentiment Analysis • NER • Embeddings</text>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#94a3b8" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
    </marker>
  </defs>

  <!-- Footer -->
  <rect y="770" width="1200" height="30" fill="#1e293b"/>
  <text x="600" y="790" font-family="Arial, sans-serif" font-size="13" fill="#cbd5e1" text-anchor="middle">
    Core attention mechanism unchanged: softmax(QK^T/√d) × V | Context: 512 → 128K+ tokens
  </text>
</svg>
